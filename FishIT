local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

local Window = OrionLib:MakeWindow({
    Name = "Fishing Super Fast (Input Mode)", 
    HidePremium = true, 
    SaveConfig = true, 
    ConfigFolder = "FishingConfig"
})

-- Variables
getgenv().fishingStart = false
getgenv().baitDelay = 0.15 -- Default delay lempar ke minigame (Bypass !)
getgenv().reelDelay = 0.05 -- Default delay catch (Fast Reel)

-- Services & Remotes
local rs = game:GetService("ReplicatedStorage")
local net = rs.Packages["_Index"]["sleitnick_net@0.2.0"].net

-- DEFINISI REMOTE BARU
local ChargeRod    = net["RF/ChargeFishingRod"]
local RequestGame  = net["RF/RequestFishingMinigameStarted"]
local CompleteGame = net["RF/CatchFishCompleted"] -- UPDATED: Menggunakan RF sesuai request
local CancelInput  = net["RF/CancelFishingInputs"]

-- Args Koordinat Default
local args = { -1.115296483039856, 0, 1763651451.636425 }

-- Functions
local function StartFishing()
    task.spawn(function()
        while getgenv().fishingStart do
            -- 1. Lempar Joran
            pcall(function() ChargeRod:InvokeServer() end)
            
            -- 2. Logic Bypass "!" (Delay Bait)
            -- Kita menunggu waktu yang ditentukan di Input Box, lalu memaksa minigame mulai
            task.wait(getgenv().baitDelay)
            
            if not getgenv().fishingStart then break end

            -- 3. Force Start Minigame (Melewati animasi tanda seru)
            pcall(function() RequestGame:InvokeServer(unpack(args)) end)

            -- 4. Logic Fast Reel (Delay Reel)
            -- Menunggu waktu sesingkat mungkin sebelum claim ikan
            task.wait(getgenv().reelDelay)
            
            if not getgenv().fishingStart then break end

            -- 5. Selesai (Catch) - Menggunakan InvokeServer untuk RF
            pcall(function() CompleteGame:InvokeServer() end)
            
            -- Sedikit jeda agar tidak crash/disconnect
            task.wait(0.05)
        end
    end)
end

-- UI TABS
local MainTab = Window:MakeTab({
    Name = "Main Fishing",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- SECTION: TOGGLE
MainTab:AddSection({
    Name = "Auto Fish Controls"
})

MainTab:AddToggle({
    Name = "Aktifkan Auto Fish",
    Default = false,
    Callback = function(Value)
        getgenv().fishingStart = Value
        if Value then
            StartFishing()
            OrionLib:MakeNotification({
                Name = "Started",
                Content = "Fishing dimulai! (Bypass '!' Aktif)",
                Image = "rbxassetid://4483345998",
                Time = 3
            })
        else
            -- Reset jika dimatikan
            pcall(function() CancelInput:InvokeServer() end)
            OrionLib:MakeNotification({
                Name = "Stopped",
                Content = "Fishing berhenti.",
                Image = "rbxassetid://4483345998",
                Time = 3
            })
        end
    end
})

-- SECTION: INPUTS (NO SLIDERS)
MainTab:AddSection({
    Name = "Pengaturan Waktu (Ketik Angka)"
})

MainTab:AddTextbox({
    Name = "Delay Bait (Bypass '!')",
    Default = "0.15",
    TextDisappear = false,
    Callback = function(Value)
        local num = tonumber(Value)
        if num then
            getgenv().baitDelay = num
        end
    end
})

MainTab:AddParagraph("Info Delay Bait", "Semakin kecil angka (cth: 0.1), semakin cepat minigame dimulai tanpa menunggu tanda seru muncul.")

MainTab:AddTextbox({
    Name = "Delay Reel (Fast Catch)",
    Default = "0.05",
    TextDisappear = false,
    Callback = function(Value)
        local num = tonumber(Value)
        if num then
            getgenv().reelDelay = num
        end
    end
})

MainTab:AddParagraph("Info Delay Reel", "Isi 0 untuk instan catch. Jika disconnect, naikkan jadi 0.1 atau 0.2.")

-- INIT
OrionLib:Init()
