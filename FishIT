-- MINI UI INVENTORY GUID SCANNER
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- coba ambil InventoryController
local InventoryController
pcall(function()
    InventoryController = require(
        game:GetService("ReplicatedStorage")
            .Controllers
            .InventoryController
    )
end)

if not InventoryController then
    warn("InventoryController tidak ditemukan")
    return
end

local Inventory =
    InventoryController.Inventory
    or InventoryController:GetInventory()

-- UI
local gui = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
gui.Name = "MiniInventoryGUID"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.fromScale(0.35, 0.45)
frame.Position = UDim2.fromScale(0.32, 0.25)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1,0,0,30)
title.Text = "Inventory GUID Scanner"
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.GothamBold
title.TextSize = 14

local search = Instance.new("TextBox", frame)
search.PlaceholderText = "Search item name..."
search.Size = UDim2.new(1,-20,0,30)
search.Position = UDim2.new(0,10,0,40)
search.BackgroundColor3 = Color3.fromRGB(35,35,35)
search.TextColor3 = Color3.new(1,1,1)
search.ClearTextOnFocus = false
search.Font = Enum.Font.Gotham
search.TextSize = 13

local list = Instance.new("ScrollingFrame", frame)
list.Position = UDim2.new(0,10,0,80)
list.Size = UDim2.new(1,-20,1,-90)
list.CanvasSize = UDim2.new(0,0,0,0)
list.ScrollBarImageTransparency = 0.3
list.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", list)
layout.Padding = UDim.new(0,6)

-- fungsi render
local function render(filter)
    list:ClearAllChildren()
    layout.Parent = list

    for category, items in pairs(Inventory) do
        for guid, item in pairs(items) do
            if not filter or string.find(
                string.lower(item.Name),
                string.lower(filter)
            ) then
                local btn = Instance.new("TextButton", list)
                btn.Size = UDim2.new(1,0,0,40)
                btn.TextWrapped = true
                btn.TextXAlignment = Left
                btn.Text =
                    item.Name ..
                    "\n[" .. category .. "]\n" ..
                    guid
                btn.Font = Enum.Font.Gotham
                btn.TextSize = 12
                btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
                btn.TextColor3 = Color3.new(1,1,1)

                btn.MouseButton1Click:Connect(function()
                    if setclipboard then
                        setclipboard(guid)
                    end
                    warn("GUID copied:", guid)
                end)
            end
        end
    end

    task.wait()
    list.CanvasSize = UDim2.new(0,0,0,layout.AbsoluteContentSize.Y + 10)
end

render()

search:GetPropertyChangedSignal("Text"):Connect(function()
    render(search.Text)
end)
