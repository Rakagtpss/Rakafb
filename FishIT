--[[
    SMART AUTO FISHING (AI DELAY LOGIC)
    Generated by Gemini
    Features: randomized intervals to mimic human behavior & prevent detection.
]]

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CoreGui = game:GetService("CoreGui")

-- // CONFIGURATION (SMART AI) \\ --
local CONFIG = {
    -- Range waktu tunggu sebelum melempar (detik)
    -- AI akan memilih angka acak di antara Min dan Max
    CastDelayMin = 0.5, 
    CastDelayMax = 1.0,

    -- Range waktu main minigame (semakin kecil semakin instan)
    -- Jangan set 0, nanti server reject. 0.05 - 0.2 adalah sweet spot.
    MinigameDelayMin = 0.05, 
    MinigameDelayMax = 0.25,
    
    -- Waktu istirahat setelah dapat ikan
    CooldownMin = 0.1,
    CooldownMax = 0.3
}

local AutoEnabled = false
local RNG = Random.new() -- Random Number Generator untuk AI Logic

-- // REMOTE EVENTS SETUP \\ --
local NetPath = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index")["sleitnick_net@0.2.0"].net
local ChargeRod = NetPath["RF/ChargeFishingRod"]
local StartMinigame = NetPath["RF/RequestFishingMinigameStarted"]
local CatchFish = NetPath["RF/CatchFishCompleted"]

-- // UI CREATION \\ --
if CoreGui:FindFirstChild("SmartFishingUI") then
    CoreGui.SmartFishingUI:Destroy()
end

local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local StatusLabel = Instance.new("TextLabel") -- Menampilkan status delay
local ToggleBtn = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")
local UICorner_Btn = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")

ScreenGui.Name = "SmartFishingUI"
ScreenGui.Parent = CoreGui

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
MainFrame.Position = UDim2.new(0.85, 0, 0.4, 0)
MainFrame.Size = UDim2.new(0, 160, 0, 110)
MainFrame.Active = true
MainFrame.Draggable = true

UICorner.Parent = MainFrame
UICorner.CornerRadius = UDim.new(0, 10)

UIStroke.Parent = MainFrame
UIStroke.Color = Color3.fromRGB(0, 200, 255) -- Warna Cyan untuk Smart Mode
UIStroke.Thickness = 2

Title.Parent = MainFrame
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1.000
Title.Position = UDim2.new(0, 0, 0, 5)
Title.Size = UDim2.new(1, 0, 0, 20)
Title.Font = Enum.Font.GothamBold
Title.Text = "SMART FISH AI"
Title.TextColor3 = Color3.fromRGB(0, 200, 255)
Title.TextSize = 14.000

StatusLabel.Parent = MainFrame
StatusLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.BackgroundTransparency = 1.000
StatusLabel.Position = UDim2.new(0, 0, 0, 25)
StatusLabel.Size = UDim2.new(1, 0, 0, 20)
StatusLabel.Font = Enum.Font.Gotham
StatusLabel.Text = "Idle..."
StatusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
StatusLabel.TextSize = 11.000

ToggleBtn.Parent = MainFrame
ToggleBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
ToggleBtn.Position = UDim2.new(0.1, 0, 0.55, 0)
ToggleBtn.Size = UDim2.new(0.8, 0, 0.35, 0)
ToggleBtn.Font = Enum.Font.GothamBold
ToggleBtn.Text = "OFF"
ToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleBtn.TextSize = 14.000

UICorner_Btn.Parent = ToggleBtn
UICorner_Btn.CornerRadius = UDim.new(0, 6)

-- // SMART FUNCTIONS \\ --

-- Fungsi untuk mendapatkan delay acak (AI Logic)
local function GetSmartDelay(min, max)
    return RNG:NextNumber(min, max)
end

local function RunSmartFish()
    task.spawn(function()
        while AutoEnabled do
            if not AutoEnabled then break end
            
            -- 1. CHARGE ROD
            StatusLabel.Text = "Casting..."
            pcall(function()
                ChargeRod:InvokeServer(nil, nil, tick(), nil)
            end)
            
            -- AI Delay sebelum minigame mulai
            local delay1 = GetSmartDelay(CONFIG.CastDelayMin, CONFIG.CastDelayMax)
            task.wait(delay1)
            
            if not AutoEnabled then break end

            -- 2. START MINIGAME
            StatusLabel.Text = "Hooking..."
            pcall(function()
                StartMinigame:InvokeServer(-0.98799896240234, 0.77976711745746, tick())
            end)

            -- AI Delay "Pura-pura main minigame" (Sangat cepat tapi bervariasi)
            local delay2 = GetSmartDelay(CONFIG.MinigameDelayMin, CONFIG.MinigameDelayMax)
            StatusLabel.Text = "Delay: " .. string.format("%.3fs", delay2) -- Menampilkan delay di layar
            task.wait(delay2)
            
            -- 3. CATCH FISH
            pcall(function()
                CatchFish:InvokeServer()
            end)
            
            StatusLabel.Text = "Caught!"
            local delay3 = GetSmartDelay(CONFIG.CooldownMin, CONFIG.CooldownMax)
            task.wait(delay3)
        end
        StatusLabel.Text = "Stopped"
    end)
end

-- // BUTTON LOGIC \\ --
ToggleBtn.MouseButton1Click:Connect(function()
    AutoEnabled = not AutoEnabled
    
    if AutoEnabled then
        ToggleBtn.Text = "ACTIVE"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 255) -- Cyan
        StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        RunSmartFish()
    else
        ToggleBtn.Text = "OFF"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
        StatusLabel.Text = "Idle..."
        StatusLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
    end
end)
